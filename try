<div className={`disabledfield-wrapper ${!isFormulaCompositionEditable ? "setWidthforwrapper" : ""}`}>
  {isFormulaCompositionEditable && (
    <>
      <TextField
        value={searchValue}
        onChange={handleSearchChange}
        className="disabledfield"
        placeholder="Search Raw material or code here..."
        InputProps={{
          disableUnderline: true,
          endAdornment: isLoading ? (
            <CircularProgress color="inherit" size={20} sx={{ position: "absolute", right: "5px" }} />
          ) : (
            <p style={{ position: "absolute", right: "5px", minWidth: "20px" }}></p>
          ),
        }}
        sx={{
          width: "100%",
          maxWidth: "400px",
          marginBottom: "10px",
          marginTop: "5px",
          "& input": {
            padding: "8px 14px",
          },
          "& fieldset": {
            border: "none", // Remove the border around the TextField
          },
          "& .MuiOutlinedInput-root": {
            "&:hover fieldset": {
              border: "none", // Ensure no border on hover
            },
            "&.Mui-focused": {
              "& fieldset": {
                border: "2px solid #00B097",
              },
            },
          },
        }}
      />
      <Popper open={isSearchResultsOpen} anchorEl={anchorEl} placement="top-start" className="formulation-table-searchresults">
        <div ref={listRef} className="search-results" style={{ fontFamily: "kenvue-sans-regular", height: getSearchResultHeight() }}>
          <Table>
            <TableBody>
              {isLoading ? (
                <TableRow>
                  <TableCell colSpan={2} style={{ fontFamily: "kenvue-sans-regular", fontSize: "14px", fontWeight: "400" }}>
                    Loading...
                  </TableCell>
                </TableRow>
              ) : mode !== "view" && searchResults?.length > 0 ? (
                searchResults?.map((result, index) => (
                  <TableRow key={`${index}+${result.tradeName}`} hover onClick={() => handleSearchSelect(result)}>
                    <TableCell style={{ fontFamily: "kenvue-sans-regular" }}>{result.tradeName}</TableCell>
                    <TableCell style={{ fontFamily: "kenvue-sans-regular" }}>{result.rawMaterialId}</TableCell>
                  </TableRow>
                ))
              ) : (
                <TableRow>
                  <TableCell colSpan={2} style={{ fontFamily: "kenvue-sans-regular", fontSize: "14px", fontWeight: "400" }}>
                    No result found
                  </TableCell>
                </TableRow>
              )}
            </TableBody>
          </Table>
        </div>
      </Popper>
    </>
  )}
</div>
